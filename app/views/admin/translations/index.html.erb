<h1>Listing translations: <%= @main_locale.short %> => <%= @locale.short %></h1>
<div style="text-align: left;">
<table style="text-align: left;">
  <tr>
    <th width="200">Key</th>
    <th>Text</th>
  </tr>
  <% tr_num = 0 %>
  <% @groups.each_with_index do |(namespace, translations), gr_num| %>
    <tr>
      <td colspan="2" class="ns"<% unless gr_num==0 %> style="height: 60px;"<% end %>>
        <strong><%= namespace || "none" %></strong>
      </td>
    </tr>
    <% for translation in translations %>
      <% loc_translation = translation.counterpart_in(@locale) %>
      <tr>
        <td class="key">:<%=h translation.tr_key %></td>
        <td class="transl<%= " miss" if loc_translation.text.blank? || (loc_translation.text == translation.text) %>">
          <%=h translation.text %>
          <div id="errors_for_ed<%= tr_num %>"></div>
          <div class="tr_ed" id="<%= "ed#{tr_num}" %>"><%=h loc_translation.text %></div>
          <script type="text/javascript">
            new Ajax.InPlaceEditorWithEmptyText('ed<%= tr_num %>', '<%= update_in_place_admin_locale_translation_path(@locale.id, translation) %>', {callback:function(form) { return Form.serialize(form);}, cols:80, rows:4, htmlResponse:false, ajaxOptions:{method:'post'}});
          </script>          
          <%#= in_place_editor "ed#{tr_num}", :url => set_admin_locale_translation_path(@locale.id, translation), :rows => 4, :cols => 80 %>
          <% tr_num+=1 %>
        </td>
      </tr>
    <% end %>
  <% end %>
</table>
<br />
</div>
<script type="text/javascript"><!--
init_transl_ui();
//-->
</script>
